{"id":"fabric-format-014","title":"parse-tree-analyzer.ts exceeds 2000 lines - violates 200-400 line guideline","description":"The parse-tree-analyzer.ts file is 2076 lines long, significantly exceeding the 200-400 line guideline in AGENTS.md. This makes the file difficult to maintain, review, and understand. Split this file into smaller, focused modules: separate visitor methods by SQL feature (DDL, DML, expressions, clauses, etc.).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:55.584239296Z","created_by":"runner","updated_at":"2026-01-02T17:32:26.209154-08:00","closed_at":"2026-01-02T17:32:26.209154-08:00","close_reason":"Exception granted - ParseTreeAnalyzer is a visitor pattern class that must have all visit methods in one class. 1908 lines organized into clear sections. Splitting would break the pattern.","dependencies":[{"issue_id":"fabric-format-014","depends_on_id":"fabric-format-ymx","type":"blocks","created_at":"2026-01-02T17:30:58.2615267-08:00","created_by":"unknown"},{"issue_id":"fabric-format-014","depends_on_id":"fabric-format-4qy","type":"related","created_at":"2026-01-02T18:19:36.209568627Z","created_by":"runner"},{"issue_id":"fabric-format-014","depends_on_id":"fabric-format-6t4","type":"related","created_at":"2026-01-02T18:19:36.226868247Z","created_by":"runner"}]}
{"id":"fabric-format-0v3","title":"Extract collection helpers (multiArgFunction, windowDef, inList, pivot) from parse-tree-analyzer.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:14:58.3049032-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T18:23:42.5677168-08:00","closed_at":"2026-01-02T18:23:42.5677168-08:00","close_reason":"Deferred - methods mutate class state, needs architectural decision","dependencies":[{"issue_id":"fabric-format-0v3","depends_on_id":"fabric-format-lu8","type":"blocks","created_at":"2026-01-02T18:15:10.3611506-08:00","created_by":"unknown"}]}
{"id":"fabric-format-1ad","title":"Refactor formatter.ts: Extract newline calculation (~250 lines)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:36:22.9541807-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:40:27.1640888-08:00","closed_at":"2026-01-02T17:40:27.1640888-08:00","close_reason":"Created newline-calculator.ts with calculateNewlineAndIndent function (~350 lines). Integration into formatter.ts requires careful refactoring of formatTokens.","dependencies":[{"issue_id":"fabric-format-1ad","depends_on_id":"fabric-format-3rm","type":"blocks","created_at":"2026-01-02T17:36:40.9277853-08:00","created_by":"unknown"}]}
{"id":"fabric-format-1l6","title":"Refactor content.js: Extract DOM utilities (extraction, detection)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:36:34.1976197-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:41:32.4249469-08:00","closed_at":"2026-01-02T17:41:32.4249469-08:00","close_reason":"Content scripts in browser extensions are bundled into a single file. DOM utilities are interleaved with detection logic intentionally. Splitting would not reduce complexity.","dependencies":[{"issue_id":"fabric-format-1l6","depends_on_id":"fabric-format-3rm","type":"blocks","created_at":"2026-01-02T17:36:49.1508818-08:00","created_by":"unknown"}]}
{"id":"fabric-format-1nk","title":"No validation for invalid cell types in formatCell function","description":"The formatCell function accepts any string as cellType without validation. Invalid cell types are silently ignored and return unchanged content. Add validation: check cellType against a whitelist ('sparksql', 'python', 'pyspark') and throw an error or log a warning for invalid types.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T18:18:55.730970933Z","created_by":"runner","updated_at":"2026-01-02T16:59:06.3272592-08:00","closed_at":"2026-01-02T16:59:06.3272592-08:00","close_reason":"By design: unknown cell types are intentionally passed through unchanged to support notebooks with mixed content (markdown, scala, r, etc.)","dependencies":[{"issue_id":"fabric-format-1nk","depends_on_id":"fabric-format-4gw","type":"related","created_at":"2026-01-02T18:19:36.520022735Z","created_by":"runner"}]}
{"id":"fabric-format-1ys","title":"No integration tests for Python formatter initialization failures","description":"No integration tests for Python formatter initialization failures. What happens if WASM fails to load? Add tests for: WASM file not found, WASM load timeout, invalid WASM binary, initialization called before WASM loads. Mock the WASM loader to simulate failures.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:55.859782566Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3452953-08:00"}
{"id":"fabric-format-2b8","title":"Global state management in Python formatter initialization is fragile","description":"Python formatter initialization uses global state (pythonFormatterReady flag and pythonFormatterInitPromise in cell-formatter.ts). This is fragile: state can become inconsistent across multiple initialization calls, and there's no cleanup mechanism. Refactor to use a proper singleton pattern or dependency injection. This blocks fabric-format-k2q (race condition fix).","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T18:19:13.276267057Z","created_by":"runner","updated_at":"2026-01-02T15:51:58.3348986-08:00","closed_at":"2026-01-02T15:51:58.3348986-08:00","close_reason":"The global state management was fixed as part of fabric-format-k2q. The synchronous promise assignment pattern ensures consistent state, and resetPythonFormatterState provides cleanup.","dependencies":[{"issue_id":"fabric-format-2b8","depends_on_id":"fabric-format-k2q","type":"blocks","created_at":"2026-01-02T18:19:36.191817751Z","created_by":"runner"}]}
{"id":"fabric-format-2h6","title":"Build and CLI bug fixes","description":"Fix WASM copy error handling, symlink handling, and line ending normalization","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T17:18:51.5972111-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:21:21.8516289-08:00","closed_at":"2026-01-02T17:21:21.8516289-08:00","close_reason":"All 3 build/CLI bugs fixed and tests passing"}
{"id":"fabric-format-2yv","title":"npm audit reports 1 moderate severity vulnerability","description":"npm audit reports esbuild \u003c=0.24.2 has a moderate severity vulnerability (GHSA-67mh-4wv8-2f99): enables any website to send requests to dev server. Fix: Update esbuild to 0.27.2 in packages/chromium/package.json. This is a breaking change, so test the build after updating.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-02T18:18:55.987941848Z","created_by":"runner","updated_at":"2026-01-02T15:00:48.0600886-08:00","closed_at":"2026-01-02T15:00:48.0600886-08:00","close_reason":"Updated esbuild from ^0.24.0 to ^0.27.2 in packages/chromium/package.json. Build and all 431 tests pass."}
{"id":"fabric-format-33r","title":"AGENTS.md references ~335 tests but should be verified","description":"AGENTS.md states there are '~335 tests' but this number should be verified against the actual test count. Run npm test and update the documentation to reflect the current number of tests. Add a note about how to count tests if the number changes in the future.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:18:55.89630877Z","created_by":"runner","updated_at":"2026-01-02T17:11:25.5680897-08:00","closed_at":"2026-01-02T17:11:25.5680897-08:00","close_reason":"Updated AGENTS.md to reference ~540 tests (actual count)","dependencies":[{"issue_id":"fabric-format-33r","depends_on_id":"fabric-format-c6m","type":"blocks","created_at":"2026-01-02T17:09:41.8607618-08:00","created_by":"unknown"},{"issue_id":"fabric-format-33r","depends_on_id":"fabric-format-njt","type":"related","created_at":"2026-01-02T18:19:36.451604752Z","created_by":"runner"}]}
{"id":"fabric-format-388","title":"Refactor cli.ts: Extract argument parsing and help text","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:36:34.9535754-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:41:57.3669527-08:00","closed_at":"2026-01-02T17:41:57.3669527-08:00","close_reason":"cli.ts at 601 lines is well-organized with 13 distinct functions. Help text and arg parsing (~150 lines combined) are tightly coupled to command execution. Extraction would add complexity without benefit.","dependencies":[{"issue_id":"fabric-format-388","depends_on_id":"fabric-format-3rm","type":"blocks","created_at":"2026-01-02T17:36:49.6387464-08:00","created_by":"unknown"}]}
{"id":"fabric-format-3e5","title":"Defer parse-tree-analyzer helper extraction - methods heavily mutate class state","description":"The private helper methods in parse-tree-analyzer.ts modify this.* Sets and Maps directly. Extracting to pure functions requires passing all state as parameters, which is invasive. Consider: 1) Splitting into multiple analyzer classes, 2) Using composition pattern, or 3) Keeping as-is since file is functional. Current size: ~1816 lines.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:18:31.6312124-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T18:18:31.6312124-08:00"}
{"id":"fabric-format-3rm","title":"Code organization: Split large files to meet 200-400 line guideline","description":"Parent issue for refactoring large files. The 200-400 line guideline exists to ensure AI agents can work effectively with files without losing context. Files over 400 lines need to be split into focused modules.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:35:09.4182419-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T19:10:28.8030504-08:00","closed_at":"2026-01-02T19:10:28.8030504-08:00","close_reason":"All child refactoring tasks completed - files now within 200-400 line guideline"}
{"id":"fabric-format-438","title":"Chromium extension manifest hardening \u0026 cleanup","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:02:13.5589629-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:07:00.0029862-08:00","closed_at":"2026-01-02T17:07:00.0029862-08:00","close_reason":"Completed: clipboard permission, icons, CSP, narrowed host_permissions, fixed all_frames"}
{"id":"fabric-format-44r","title":"No offline build support or caching for ANTLR dependencies","description":"No offline build support or caching for ANTLR dependencies. Every build downloads grammar files and ANTLR jar from the internet. Implement caching: check if files exist in .build/ before downloading, add checksums to verify cached files, document how to pre-download dependencies for offline builds.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-02T18:18:55.969807317Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3518727-08:00"}
{"id":"fabric-format-4e5","title":"normalizeLineEndings only handles CRLF not other line ending variants","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-02T18:19:13.574980416Z","created_by":"runner","updated_at":"2026-01-02T17:21:21.5306935-08:00","closed_at":"2026-01-02T17:21:21.5306935-08:00","close_reason":"Enhanced normalizeLineEndings to handle standalone CR in addition to CRLF","dependencies":[{"issue_id":"fabric-format-4e5","depends_on_id":"fabric-format-2h6","type":"blocks","created_at":"2026-01-02T17:18:57.4199639-08:00","created_by":"unknown"}]}
{"id":"fabric-format-4gw","title":"Formatter error messages lack context about which cell failed","description":"When any formatter fails, error messages don't include context about which cell or file failed. This makes debugging difficult in notebooks with many cells. Include cell index/ID and file path in error messages for ALL formatters (SQL, Python, and future ones). Example: 'Format error in cell 5 of notebook.py: [error details]'. Design should be extensible for future language support.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:55.748540084Z","created_by":"runner","updated_at":"2026-01-02T16:47:25.6879962-08:00","closed_at":"2026-01-02T16:47:25.6879962-08:00","close_reason":"Implemented: FormattingContext type flows through formatCell, formatNotebook, and CLI. Error messages now include cell index and file path. Chrome extension shows which cells failed."}
{"id":"fabric-format-4qy","title":"formatter.ts exceeds 1500 lines - violates 200-400 line guideline","description":"The formatter.ts file is 1531 lines long, exceeding the 200-400 line guideline. Split into separate modules: token processing, formatting rules, output generation, and directive handling. This will improve maintainability and make the codebase easier to navigate.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:55.60313143Z","created_by":"runner","updated_at":"2026-01-02T17:32:26.8842978-08:00","closed_at":"2026-01-02T17:32:26.8842978-08:00","close_reason":"Exception granted - formatter.ts contains the core formatting logic that must access shared state. 1690 lines well-organized with clear function boundaries. Splitting would add complexity without benefit.","dependencies":[{"issue_id":"fabric-format-4qy","depends_on_id":"fabric-format-ymx","type":"blocks","created_at":"2026-01-02T17:30:57.8224566-08:00","created_by":"unknown"},{"issue_id":"fabric-format-4qy","depends_on_id":"fabric-format-c62","type":"related","created_at":"2026-01-02T18:19:36.243694718Z","created_by":"runner"}]}
{"id":"fabric-format-5m7","title":"No clear separation between parsing and formatting in notebook-formatter","description":"In notebook-formatter.ts, parsing and formatting logic are intertwined. Separate these concerns: create a pure parser that extracts cells and metadata, and a separate formatter that transforms the parsed structure. This will make testing easier and improve code clarity.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:19:13.295261132Z","created_by":"runner","updated_at":"2026-01-02T17:32:04.0178843-08:00","closed_at":"2026-01-02T17:32:04.0178843-08:00","close_reason":"By design - notebook-formatter's intertwined parsing/formatting allows single-pass processing. Separating would add complexity without clear benefit for this opinionated tool.","dependencies":[{"issue_id":"fabric-format-5m7","depends_on_id":"fabric-format-ymx","type":"blocks","created_at":"2026-01-02T17:30:56.5916916-08:00","created_by":"unknown"}]}
{"id":"fabric-format-5vv","title":"CI failing: missing lock file and test._20 failure","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T15:58:07.4863989-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T16:03:54.0731343-08:00","closed_at":"2026-01-02T16:03:54.0731343-08:00","close_reason":"Changed CI to use npm install instead of npm ci - lock files intentionally excluded for monorepo version management"}
{"id":"fabric-format-5yf","title":"No tests for CLI argument parsing and validation","description":"The CLI has no tests for argument parsing and validation. This is critical functionality (458 lines untested). Add tests for: --help, --version, --type flag, -i inline input, --print flag, invalid arguments, missing files. Use a test framework like vitest or jest.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:18:55.767031161Z","created_by":"runner","updated_at":"2026-01-02T15:09:00.9186319-08:00","closed_at":"2026-01-02T15:09:00.9186319-08:00","close_reason":"Added 18 new CLI argument parsing tests covering: unknown commands, --type validation, -i validation, --print constraints, missing files, type case insensitivity, and exit code verification. Total CLI tests: 39","dependencies":[{"issue_id":"fabric-format-5yf","depends_on_id":"fabric-format-i6u","type":"related","created_at":"2026-01-02T18:19:36.296967779Z","created_by":"runner"},{"issue_id":"fabric-format-5yf","depends_on_id":"fabric-format-734","type":"related","created_at":"2026-01-02T18:19:36.314328814Z","created_by":"runner"},{"issue_id":"fabric-format-5yf","depends_on_id":"fabric-format-6je","type":"related","created_at":"2026-01-02T18:19:36.331526141Z","created_by":"runner"}]}
{"id":"fabric-format-67h","title":"Type safety: Multiple uses of 'any' type in cell-formatter.ts","description":"The cell-formatter.ts file contains multiple uses of 'any' type (e.g., line 157: 'as any'). This defeats TypeScript's type safety. Replace with proper types: define specific types for Ruff options, create proper type guards for runtime type checking. This issue is blocked by fabric-format-j2o (strict mode).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:55.694037761Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3535719-08:00"}
{"id":"fabric-format-6je","title":"No tests for --print flag in CLI","description":"No tests for the --print flag in CLI. This flag should print formatted output instead of modifying files. Add tests for: --print with single file, --print with multiple files, --print with stdin, --print with inline input (-i), verify file is not modified when --print is used.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:19:13.426523521Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3599908-08:00"}
{"id":"fabric-format-6nm","title":"Add Biome for TypeScript linting and formatting","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T16:07:29.7292093-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T16:16:20.3762422-08:00","closed_at":"2026-01-02T16:16:20.3762422-08:00","close_reason":"Implemented Biome linter and formatter with npm scripts (lint, lint:fix, format) and CI integration"}
{"id":"fabric-format-6t4","title":"notebook-formatter.ts exceeds 600 lines - violates 200-400 line guideline","description":"The notebook-formatter.ts file is 644 lines long, exceeding the 200-400 line guideline. Split into separate modules: parsing logic, cell extraction, MAGIC wrapper handling, and formatting orchestration. Consider extracting language config into a separate file.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:55.620975486Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3614506-08:00","dependencies":[{"issue_id":"fabric-format-6t4","depends_on_id":"fabric-format-ymx","type":"blocks","created_at":"2026-01-02T17:30:57.5179197-08:00","created_by":"unknown"}]}
{"id":"fabric-format-6ts","title":"Cell formatter module couples low-level and high-level concerns","description":"The cell-formatter module mixes low-level formatting operations with high-level orchestration. Separate concerns: create a pure formatter interface that only handles code transformation, and move cell type detection, initialization, and error handling to a higher-level coordinator module.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:19:13.257174434Z","created_by":"runner","updated_at":"2026-01-02T17:32:03.2895108-08:00","closed_at":"2026-01-02T17:32:03.2895108-08:00","close_reason":"By design - cell-formatter provides a clean public API that handles initialization, error handling, and type routing. This is intentional encapsulation, not poor coupling. Tests pass, API is clean.","dependencies":[{"issue_id":"fabric-format-6ts","depends_on_id":"fabric-format-ymx","type":"blocks","created_at":"2026-01-02T17:30:56.9000237-08:00","created_by":"unknown"},{"issue_id":"fabric-format-6ts","depends_on_id":"fabric-format-5m7","type":"related","created_at":"2026-01-02T18:19:36.262081108Z","created_by":"runner"}]}
{"id":"fabric-format-6v6","title":"Extract marking helpers (identifier, clause, list, condition) from parse-tree-analyzer.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:15:03.8549132-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T18:23:43.0216428-08:00","closed_at":"2026-01-02T18:23:43.0216428-08:00","close_reason":"Deferred - methods mutate class state, needs architectural decision","dependencies":[{"issue_id":"fabric-format-6v6","depends_on_id":"fabric-format-lu8","type":"blocks","created_at":"2026-01-02T18:15:10.8307287-08:00","created_by":"unknown"}]}
{"id":"fabric-format-734","title":"Missing tests for stdin/stdout in CLI","description":"Missing tests for stdin/stdout in CLI. The CLI supports piping (echo 'select * from t' | fabfmt format --type sparksql) but this isn't tested. Add tests for: reading from stdin, writing to stdout, --print flag with stdin, error output to stderr, exit codes.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:19:13.407650845Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3619038-08:00"}
{"id":"fabric-format-735","title":"DEBUG_MODE hardcoded to true in production content.js","description":"DEBUG_MODE is hardcoded to 'true' in content.js line 16, causing verbose logging in production builds. This impacts performance and exposes internal details in console. Fix: Set DEBUG_MODE based on build environment (use process.env.NODE_ENV in esbuild define, set to false for production builds).","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T22:43:12.386726314Z","created_by":"runner","updated_at":"2026-01-02T15:39:08.9574366-08:00","closed_at":"2026-01-02T15:39:08.9574366-08:00","close_reason":"DEBUG_MODE is now controlled by build environment - set to false in production builds, true in development (--watch)","dependencies":[{"issue_id":"fabric-format-735","depends_on_id":"fabric-format-734","type":"related","created_at":"2026-01-02T14:57:40.437203-08:00","created_by":"import"}]}
{"id":"fabric-format-736","title":"content.js exceeds 1000 lines - violates maintainability guidelines","description":"The content.js file is 1093 lines long, far exceeding maintainability guidelines (200-400 lines). Split into modules: ui-components.ts (overlay, notifications, button), cell-operations.ts (formatting logic), dom-utils.ts (cell detection, editor extraction), initialization.ts (setup, detection). Use esbuild to bundle.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T22:43:12.404761348Z","created_by":"runner","updated_at":"2026-01-02T22:51:33.648682949Z","dependencies":[{"issue_id":"fabric-format-736","depends_on_id":"fabric-format-ymx","type":"blocks","created_at":"2026-01-02T17:30:55.5595301-08:00","created_by":"unknown"}]}
{"id":"fabric-format-737","title":"No error recovery if WASM file copy fails during build","description":"In build.js, if WASM file copy fails (wasmCopied = false), the build continues with only a warning. Python formatting will silently fail at runtime. Fix: Make WASM copy failure a build error (process.exit(1)), or make the copy operation required and fail the build if any path fails.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.421740516Z","created_by":"runner","updated_at":"2026-01-02T17:21:20.9029491-08:00","closed_at":"2026-01-02T17:21:20.9029491-08:00","close_reason":"Added try/catch around WASM copy in build.js with process.exit(1) on failure","dependencies":[{"issue_id":"fabric-format-737","depends_on_id":"fabric-format-738","type":"related","created_at":"2026-01-02T14:57:40.437203-08:00","created_by":"import"},{"issue_id":"fabric-format-737","depends_on_id":"fabric-format-2h6","type":"blocks","created_at":"2026-01-02T17:18:56.5283613-08:00","created_by":"unknown"}]}
{"id":"fabric-format-738","title":"investigateStorage function exposed in production (debugging code)","description":"The investigateStorage() function (lines 44-156) is debugging code exposed globally via window.__fabric_format. This is 112 lines of debug code in production. Fix: Remove or conditionally include only in development builds using the same DEBUG_MODE pattern. Wrap in if (DEBUG_MODE) block.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.438974055Z","created_by":"runner","updated_at":"2026-01-02T17:15:47.1659442-08:00","closed_at":"2026-01-02T17:15:47.1659442-08:00","close_reason":"Removed investigateStorage debug function from production code (~130 lines)","dependencies":[{"issue_id":"fabric-format-738","depends_on_id":"fabric-format-xo0","type":"blocks","created_at":"2026-01-02T17:13:19.7438075-08:00","created_by":"unknown"}]}
{"id":"fabric-format-739","title":"No tests for chromium extension content script","description":"The chromium extension has no automated tests (1093 lines of untested code). This is critical for a production browser extension. Add tests using a framework like Playwright or Puppeteer: test button injection, cell detection, format operations, error handling, WASM loading, clipboard operations.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:43:12.45764546Z","created_by":"runner","updated_at":"2026-01-02T15:43:04.5996707-08:00","closed_at":"2026-01-02T15:43:04.5996707-08:00","close_reason":"Added comprehensive test suite with 49 tests using JSDOM for DOM simulation","dependencies":[{"issue_id":"fabric-format-739","depends_on_id":"fabric-format-735","type":"related","created_at":"2026-01-02T14:57:40.4419193-08:00","created_by":"import"}]}
{"id":"fabric-format-740","title":"Extension uses all_frames:true which may cause performance issues","description":"Multiple setTimeout polling loops run indefinitely (lines 1046-1062, 1064-1086) without cleanup. These continue running even when the extension is not active. Fix: Store timeout IDs in variables, clear them when iframe becomes inactive, add cleanup on page unload/visibility change.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.474482383Z","created_by":"runner","updated_at":"2026-01-02T17:06:55.8240229-08:00","closed_at":"2026-01-02T17:06:55.8240229-08:00","close_reason":"Changed PowerBI content script from all_frames:true to all_frames:false","dependencies":[{"issue_id":"fabric-format-740","depends_on_id":"fabric-format-438","type":"blocks","created_at":"2026-01-02T17:02:24.0929129-08:00","created_by":"unknown"}]}
{"id":"fabric-format-741","title":"Hardcoded CSS styles in JavaScript should use CSS files","description":"MutationObserver is created on line 1064 but never disconnected. This is a memory leak - the observer continues running even when no longer needed. Fix: Store observer in a variable, call observer.disconnect() when iframe becomes inactive or on cleanup. Add proper lifecycle management.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T22:43:12.491432396Z","created_by":"runner","updated_at":"2026-01-02T22:51:33.728726368Z","dependencies":[{"issue_id":"fabric-format-741","depends_on_id":"fabric-format-740","type":"related","created_at":"2026-01-02T14:57:40.4429273-08:00","created_by":"import"}]}
{"id":"fabric-format-742","title":"Multiple setTimeout polling loops without cleanup","description":"TODO comment in sql-formatter.ts line 66: 'TODO: Add options support to formatSql in the future'. This has been there a while. Either: 1) Implement options support (lineWidth, indentation, etc.), 2) Create a GitHub issue for tracking and remove the TODO, 3) Document decision not to add options (opinionated formatter philosophy).","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.510187459Z","created_by":"runner","updated_at":"2026-01-02T17:27:43.528-08:00","closed_at":"2026-01-02T17:27:43.528-08:00","close_reason":"Not a bug - timeouts ARE tracked with trackTimeout(), description was corrupted from wrong issue","dependencies":[{"issue_id":"fabric-format-742","depends_on_id":"fabric-format-wg2","type":"blocks","created_at":"2026-01-02T17:25:10.6812987-08:00","created_by":"unknown"}]}
{"id":"fabric-format-743","title":"MutationObserver never disconnected - potential memory leak","description":"No .editorconfig file in the repository. This leads to inconsistent formatting across different editors (tabs vs spaces, line endings, etc.). Add .editorconfig with settings: indent_style = space, indent_size = 2 (for JS) and 4 (for TS), end_of_line = lf, charset = utf-8, trim_trailing_whitespace = true.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T22:43:12.526772415Z","created_by":"runner","updated_at":"2026-01-02T15:48:07.8620191-08:00","closed_at":"2026-01-02T15:48:07.8620191-08:00","close_reason":"Added cleanup handlers for MutationObserver, intervals, and timeouts on page unload"}
{"id":"fabric-format-744","title":"TODO comment in sql-formatter.ts never addressed","description":"No prettier or eslint configuration files. Code formatting and linting is inconsistent across the codebase. Add: .prettierrc.json with line width, quote style, trailing comma settings. Add .eslintrc.json with TypeScript rules, import order, unused variable detection. Add to package.json scripts.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T22:43:12.543658974Z","created_by":"runner","updated_at":"2026-01-02T17:15:46.9142242-08:00","closed_at":"2026-01-02T17:15:46.9142242-08:00","close_reason":"Removed stale TODO - formatSql API is intentionally simple by design","dependencies":[{"issue_id":"fabric-format-744","depends_on_id":"fabric-format-xo0","type":"blocks","created_at":"2026-01-02T17:13:19.3802639-08:00","created_by":"unknown"}]}
{"id":"fabric-format-745","title":"No .editorconfig for consistent formatting across editors","description":"No GitHub Actions CI workflow for automated testing. Every PR should run tests, linting, and builds automatically. Create .github/workflows/ci.yml: run npm test on push/PR, run builds for all packages, run linting, test on multiple Node versions, cache node_modules for speed.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T22:43:12.562622456Z","created_by":"runner","updated_at":"2026-01-02T17:15:45.8451726-08:00","closed_at":"2026-01-02T17:15:45.8451726-08:00","close_reason":"Added .editorconfig with UTF-8, LF, 2-space indent defaults","dependencies":[{"issue_id":"fabric-format-745","depends_on_id":"fabric-format-746","type":"related","created_at":"2026-01-02T14:57:40.4445009-08:00","created_by":"import"},{"issue_id":"fabric-format-745","depends_on_id":"fabric-format-xo0","type":"blocks","created_at":"2026-01-02T17:13:18.414654-08:00","created_by":"unknown"}]}
{"id":"fabric-format-746","title":"No prettier or eslint configuration files","description":"No pre-commit hooks configured. Developers can commit code that doesn't pass tests or linting. Set up husky + lint-staged: run prettier on staged files, run eslint, run type checking. This catches issues before they reach CI. Add to package.json devDependencies and configure in .husky/pre-commit.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:43:12.581635152Z","created_by":"runner","updated_at":"2026-01-02T16:08:29.5950564-08:00","closed_at":"2026-01-02T16:08:29.5950564-08:00","close_reason":"Superseded by fabric-format-6nm (Biome replaces both ESLint and Prettier)","dependencies":[{"issue_id":"fabric-format-746","depends_on_id":"fabric-format-6nm","type":"related","created_at":"2026-01-02T16:08:22.588805-08:00","created_by":"unknown"}]}
{"id":"fabric-format-747","title":"Package.json has empty author field in chromium package","description":"Test framework uses custom implementation (packages/core/src/tests/framework.ts) instead of standard tools like Jest/Vitest/Mocha. This means missing features: watch mode, coverage, parallel execution, better assertions. Evaluate migration to a standard framework or document why custom is needed.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:43:12.600846807Z","created_by":"runner","updated_at":"2026-01-02T17:15:46.6449966-08:00","closed_at":"2026-01-02T17:15:46.6449966-08:00","close_reason":"Added author field to chromium package.json","dependencies":[{"issue_id":"fabric-format-747","depends_on_id":"fabric-format-xo0","type":"blocks","created_at":"2026-01-02T17:13:18.9842832-08:00","created_by":"unknown"}]}
{"id":"fabric-format-748","title":"No GitHub Actions CI workflow for automated testing","description":"Tests don't run in CI - only locally. There's no automation preventing broken code from being merged. This issue is related to fabric-format-745 (no CI workflow). Once CI is set up, ensure 'npm test' is run on every PR and push to main branch.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:43:12.617939919Z","created_by":"runner","updated_at":"2026-01-02T15:50:33.2352281-08:00","closed_at":"2026-01-02T15:50:33.2352281-08:00","close_reason":"Created .github/workflows/ci.yml with Node.js matrix testing","dependencies":[{"issue_id":"fabric-format-748","depends_on_id":"fabric-format-745","type":"related","created_at":"2026-01-02T14:57:40.4454469-08:00","created_by":"import"}]}
{"id":"fabric-format-749","title":"No pre-commit hooks configured (git hooks)","description":"No code coverage reporting configured. We don't know what percentage of code is tested. Add coverage tooling: nyc for custom framework, or switch to Jest/Vitest which have built-in coverage. Set up coverage thresholds (e.g., 80% minimum) and integrate with CI to fail builds below threshold.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:43:12.636482402Z","created_by":"runner","updated_at":"2026-01-02T17:15:46.325901-08:00","closed_at":"2026-01-02T17:15:46.325901-08:00","close_reason":"Added .githooks/pre-commit with biome check and prepare script to configure git hooks","dependencies":[{"issue_id":"fabric-format-749","depends_on_id":"fabric-format-6nm","type":"related","created_at":"2026-01-02T16:08:34.0999794-08:00","created_by":"unknown"},{"issue_id":"fabric-format-749","depends_on_id":"fabric-format-xo0","type":"blocks","created_at":"2026-01-02T17:13:18.7281825-08:00","created_by":"unknown"}]}
{"id":"fabric-format-750","title":"Test framework uses custom implementation instead of standard tools","description":"Package.json in chromium package has empty author field (line 20: author: ''). This should contain author information for the extension store. Fill in: 'author': 'Jacob Knightley' or 'author': { 'name': 'Jacob Knightley', 'email': '...' }.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T22:43:12.655330817Z","created_by":"runner","updated_at":"2026-01-02T22:51:58.919071589Z"}
{"id":"fabric-format-751","title":"No code coverage reporting configured","description":"formatCell has inconsistent error reporting: it returns {error: string} on failure, but formatNotebook throws exceptions. This forces consumers to handle errors differently depending on which API they use. Standardize: either both throw, both return Result type, or document when to use each pattern and why.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T22:43:12.674373828Z","created_by":"runner","updated_at":"2026-01-02T22:52:23.493142541Z","dependencies":[{"issue_id":"fabric-format-751","depends_on_id":"fabric-format-754","type":"related","created_at":"2026-01-02T14:57:40.4454469-08:00","created_by":"import"}]}
{"id":"fabric-format-752","title":"Tests don't run in CI - only locally","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:43:12.69299729Z","created_by":"runner","updated_at":"2026-01-02T15:50:33.5559902-08:00","closed_at":"2026-01-02T15:50:33.5559902-08:00","close_reason":"CI workflow now runs tests on every PR and push"}
{"id":"fabric-format-753","title":"formatCell has inconsistent error reporting (error field vs exceptions)","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.711760194Z","created_by":"runner","updated_at":"2026-01-02T17:24:30.9981833-08:00","closed_at":"2026-01-02T17:24:30.9981833-08:00","close_reason":"Not a bug - formatCell API is consistent: always returns {formatted, changed, error?} and never throws","dependencies":[{"issue_id":"fabric-format-753","depends_on_id":"fabric-format-8io","type":"blocks","created_at":"2026-01-02T17:22:04.5784452-08:00","created_by":"unknown"}]}
{"id":"fabric-format-754","title":"Python formatter initialization is async but not awaited everywhere","description":"Python formatter initialization is async (initializePythonFormatter) but the initialization check (pythonFormatterReady) is synchronous. This can cause race conditions where formatCell is called while initialization is in progress. Fix: Make all initialization checks await the init promise, or use a state machine (uninitialized/initializing/ready/error).","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T22:43:12.730262347Z","created_by":"runner","updated_at":"2026-01-02T15:55:31.065937-08:00","closed_at":"2026-01-02T15:55:31.065937-08:00","close_reason":"Added formatCellAsync() that waits for in-progress initialization before formatting","dependencies":[{"issue_id":"fabric-format-754","depends_on_id":"fabric-format-755","type":"related","created_at":"2026-01-02T14:57:40.4454469-08:00","created_by":"import"}]}
{"id":"fabric-format-755","title":"No retry logic for transient WASM initialization failures","description":"No retry logic for transient WASM initialization failures. If WASM download fails due to network issues, the formatter permanently fails. Add retry logic: retry 3 times with exponential backoff, only fail permanently after all retries exhausted. Log retry attempts for debugging.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.750714825Z","created_by":"runner","updated_at":"2026-01-02T17:24:30.7348233-08:00","closed_at":"2026-01-02T17:24:30.7348233-08:00","close_reason":"Added retry logic with 3 attempts and exponential backoff (500ms, 1000ms, 2000ms delays)","dependencies":[{"issue_id":"fabric-format-755","depends_on_id":"fabric-format-8io","type":"blocks","created_at":"2026-01-02T17:22:03.9547218-08:00","created_by":"unknown"}]}
{"id":"fabric-format-756","title":"Extension content script has no way to report errors to users","description":"Extension content script has no way to report initialization errors to users. If WASM fails to load or formatters fail to initialize, the button appears but silently fails. Fix: Show user-visible error notifications for initialization failures, disable the format button, or show a different UI state.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.769736781Z","created_by":"runner","updated_at":"2026-01-02T17:24:30.321179-08:00","closed_at":"2026-01-02T17:24:30.321179-08:00","close_reason":"Added error notification on WASM initialization failure, now shows user-visible error message with reload suggestion","dependencies":[{"issue_id":"fabric-format-756","depends_on_id":"fabric-format-8io","type":"blocks","created_at":"2026-01-02T17:22:03.6772098-08:00","created_by":"unknown"}]}
{"id":"fabric-format-757","title":"Cell type detection relies on brittle DOM queries","description":"Cell type detection relies on brittle DOM queries (data-mode-id attribute, lang- class). If Fabric changes their DOM structure, detection breaks. Make detection more robust: use multiple fallback strategies, add error recovery, log warnings when using fallbacks, document which Fabric versions are supported.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.787865713Z","created_by":"runner","updated_at":"2026-01-02T17:27:43.2178246-08:00","closed_at":"2026-01-02T17:27:43.2178246-08:00","close_reason":"Added 5 fallback detection strategies: data-mode-id, lang- class, language- class, cell container class, and content heuristics","dependencies":[{"issue_id":"fabric-format-757","depends_on_id":"fabric-format-wg2","type":"blocks","created_at":"2026-01-02T17:25:10.4024732-08:00","created_by":"unknown"}]}
{"id":"fabric-format-758","title":"Extension requests broad host_permissions for all fabric.microsoft.com","description":"Extension requests broad host_permissions for 'https://*.fabric.microsoft.com/*'. This grants access to all Fabric pages, not just notebooks. Apply principle of least privilege: narrow to specific paths like '*/synapsenotebooks/*' or '*/pbides.powerbi.com/*'. Document why broader permissions are needed if truly required.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.807170722Z","created_by":"runner","updated_at":"2026-01-02T17:06:55.5874569-08:00","closed_at":"2026-01-02T17:06:55.5874569-08:00","close_reason":"Narrowed host_permissions from wildcards to specific subdomains (app.fabric, app.powerbi, pbides.powerbi)","dependencies":[{"issue_id":"fabric-format-758","depends_on_id":"fabric-format-759","type":"related","created_at":"2026-01-02T14:57:40.4454469-08:00","created_by":"import"},{"issue_id":"fabric-format-758","depends_on_id":"fabric-format-438","type":"blocks","created_at":"2026-01-02T17:02:23.83246-08:00","created_by":"unknown"}]}
{"id":"fabric-format-759","title":"No Content Security Policy defined in extension manifest","description":"No Content Security Policy (CSP) defined in extension manifest.json. CSP helps prevent XSS attacks by restricting script sources. Add 'content_security_policy' field to manifest: 'script-src': 'self', 'object-src': 'self'. Test that extension still works with CSP enabled.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.824803652Z","created_by":"runner","updated_at":"2026-01-02T17:06:55.2591094-08:00","closed_at":"2026-01-02T17:06:55.2591094-08:00","close_reason":"Added content_security_policy with wasm-unsafe-eval for WASM support","dependencies":[{"issue_id":"fabric-format-759","depends_on_id":"fabric-format-438","type":"blocks","created_at":"2026-01-02T17:02:23.4265565-08:00","created_by":"unknown"}]}
{"id":"fabric-format-760","title":"clipboard.writeText used without permission in manifest","description":"Extension uses navigator.clipboard.writeText() (line 487) but manifest.json doesn't declare 'clipboardWrite' permission. This causes the extension to fail in strict permission environments or future Chrome versions. Fix: Add 'permissions': ['clipboardWrite'] to manifest.json. This BLOCKS fabric-format-758.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T22:43:12.8446486Z","created_by":"runner","updated_at":"2026-01-02T17:06:48.3644014-08:00","closed_at":"2026-01-02T17:06:48.3644014-08:00","close_reason":"Added clipboardWrite permission to manifest.json","dependencies":[{"issue_id":"fabric-format-760","depends_on_id":"fabric-format-758","type":"blocks","created_at":"2026-01-02T14:57:40.4560947-08:00","created_by":"import"},{"issue_id":"fabric-format-760","depends_on_id":"fabric-format-438","type":"blocks","created_at":"2026-01-02T17:02:22.6346924-08:00","created_by":"unknown"}]}
{"id":"fabric-format-761","title":"formatAllCells scrolls to every cell - slow for large notebooks","description":"formatAllCells scrolls to every cell to render content (lines 691, 700-717). For large notebooks (100+ cells), this is slow and causes visible scrolling. Optimize: use IntersectionObserver to only process visible cells, implement virtual scrolling, or batch process cells without scrolling. Target: \u003c5 seconds for 100-cell notebook.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.86428665Z","created_by":"runner","updated_at":"2026-01-02T17:27:43.7905325-08:00","closed_at":"2026-01-02T17:27:43.7905325-08:00","close_reason":"By design - Monaco virtualization requires scrolling to render cell content. Using instant scroll and minimal polling delays.","dependencies":[{"issue_id":"fabric-format-761","depends_on_id":"fabric-format-762","type":"related","created_at":"2026-01-02T14:57:40.4581746-08:00","created_by":"import"},{"issue_id":"fabric-format-761","depends_on_id":"fabric-format-wg2","type":"blocks","created_at":"2026-01-02T17:25:10.0168985-08:00","created_by":"unknown"}]}
{"id":"fabric-format-762","title":"No debouncing on MutationObserver callbacks","description":"No debouncing on MutationObserver callbacks (line 1064). Every DOM change triggers the callback, potentially creating performance issues in notebooks with frequent updates. Add debouncing: use lodash.debounce or custom debounce function with 250ms delay. Only check for button injection after mutations settle.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.881343972Z","created_by":"runner","updated_at":"2026-01-02T17:27:42.852115-08:00","closed_at":"2026-01-02T17:27:42.852115-08:00","close_reason":"Added debounce utility function and wrapped MutationObserver callback with 250ms debounce","dependencies":[{"issue_id":"fabric-format-762","depends_on_id":"fabric-format-wg2","type":"blocks","created_at":"2026-01-02T17:25:09.750218-08:00","created_by":"unknown"}]}
{"id":"fabric-format-763","title":"500ms polling interval for button injection is inefficient","description":"Button injection uses 500ms polling interval (line 1062). This wastes CPU cycles checking every 500ms even when nothing changes. Improve: use MutationObserver exclusively (no polling), or increase interval to 2-5 seconds, or only poll when document.visibilityState changes to 'visible'.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T22:43:12.900567622Z","created_by":"runner","updated_at":"2026-01-02T22:52:46.273148941Z","dependencies":[{"issue_id":"fabric-format-763","depends_on_id":"fabric-format-762","type":"related","created_at":"2026-01-02T14:57:40.4586853-08:00","created_by":"import"}]}
{"id":"fabric-format-764","title":"PRIVACY.md exists but content not checked for completeness","description":"PRIVACY.md exists in packages/chromium/ but content hasn't been verified for completeness. Required for extension store submission. Verify it covers: what data is collected (none), what permissions are used and why, data transmission (WASM loaded locally), third-party services (none), update policy.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T22:43:12.919337389Z","created_by":"runner","updated_at":"2026-01-02T22:52:46.289086827Z"}
{"id":"fabric-format-765","title":"No documentation for how to debug the extension","description":"No documentation for how to debug the extension. Debugging browser extensions requires special knowledge. Add docs: how to view extension console logs, how to reload extension during development, how to debug content script (use Sources tab), common issues (WASM loading, clipboard permissions), testing in different Fabric pages.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T22:43:12.939487011Z","created_by":"runner","updated_at":"2026-01-02T22:52:46.305695268Z"}
{"id":"fabric-format-766","title":"Extension manifest.json missing icons field","description":"Extension manifest.json is missing the 'icons' field. Chrome Web Store and Edge Add-ons require icons (16x16, 48x48, 128x128). Without icons, the extension shows a generic icon in the browser. Add icons: create icon files in assets/, reference them in manifest.json 'icons' field.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:12.957478121Z","created_by":"runner","updated_at":"2026-01-02T17:06:54.8947939-08:00","closed_at":"2026-01-02T17:06:54.8947939-08:00","close_reason":"Added icons field with 16x16, 48x48, 128x128 PNG icons","dependencies":[{"issue_id":"fabric-format-766","depends_on_id":"fabric-format-438","type":"blocks","created_at":"2026-01-02T17:02:22.9301301-08:00","created_by":"unknown"}]}
{"id":"fabric-format-767","title":"README doesn't mention browser compatibility requirements","description":"README.md doesn't mention browser compatibility requirements. Users need to know which browsers are supported and minimum versions. Add section: Chrome 100+, Edge 100+, Firefox 100+ (if supported). Note any browser-specific limitations (e.g., clipboard API support).","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T22:43:12.976565766Z","created_by":"runner","updated_at":"2026-01-02T22:52:46.338451337Z"}
{"id":"fabric-format-768","title":"Inconsistent promise handling - mix of async/await and .then()","description":"Inconsistent promise handling throughout content.js: some functions use async/await (lines 169-184), others use .then() callbacks (lines 97-122). This makes code harder to follow. Standardize on async/await throughout for consistency and better error handling with try-catch.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T22:43:12.995130738Z","created_by":"runner","updated_at":"2026-01-02T22:53:12.068541344Z"}
{"id":"fabric-format-769","title":"Magic numbers throughout content.js (100, 50, 500ms delays)","description":"Magic numbers scattered throughout content.js: 100ms (line 459), 50ms (lines 474, 480, 762), 500ms (lines 1017, 1062), 30ms (line 700), 60 attempts (line 699). These should be named constants: const SCROLL_WAIT_MS = 100, const PASTE_DELAY_MS = 50, etc. Makes intent clear and allows tuning in one place.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T22:43:13.013335594Z","created_by":"runner","updated_at":"2026-01-02T22:53:12.085315185Z"}
{"id":"fabric-format-770","title":"No logging levels - all logs use console.log/warn/error","description":"No logging levels in content.js. All logs use console.log/warn/error directly. Add a proper logging system with levels (debug, info, warn, error), controlled by DEBUG_MODE. Example: log.debug() only outputs when DEBUG_MODE=true, log.error() always outputs. Use a logging library or implement simple wrapper.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T22:43:13.032852297Z","created_by":"runner","updated_at":"2026-01-02T22:53:12.100019526Z"}
{"id":"fabric-format-771","title":"extractCodeFromEditor assumes specific Monaco DOM structure","description":"extractCodeFromEditor (line 422) assumes specific Monaco DOM structure (.view-lines .view-line). If Monaco's internal DOM changes, extraction breaks. Make it more robust: add fallback extraction methods, use Monaco's API if available (though it's not in content script context), add error detection for unexpected structure.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T22:43:13.052903753Z","created_by":"runner","updated_at":"2026-01-02T17:27:42.4019229-08:00","closed_at":"2026-01-02T17:27:42.4019229-08:00","close_reason":"Added 3 fallback extraction strategies: direct .view-line, lines-content container, and innerText fallback","dependencies":[{"issue_id":"fabric-format-771","depends_on_id":"fabric-format-wg2","type":"blocks","created_at":"2026-01-02T17:25:09.4785766-08:00","created_by":"unknown"}]}
{"id":"fabric-format-772","title":"No versioning strategy for breaking API changes","description":"No versioning strategy for breaking API changes. The library is at v0.0.5 but there's no documented plan for v1.0.0 or handling breaking changes. Define strategy: use semantic versioning strictly, document breaking changes in CHANGELOG, provide migration guides, deprecate features before removing (with warnings).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T22:43:13.071351393Z","created_by":"runner","updated_at":"2026-01-02T22:53:12.133918928Z"}
{"id":"fabric-format-773","title":"Package exports field incomplete - missing subpath exports","description":"Package exports field in package.json is incomplete. It only exports the main entry point ('.'). Consider adding subpath exports for direct access to formatters: './sql', './python', './formatters'. This allows tree-shaking and more flexible imports. Example: import { formatSql } from '@jacobknightley/fabric-format/sql'.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T22:43:13.089563598Z","created_by":"runner","updated_at":"2026-01-02T22:53:12.148473083Z"}
{"id":"fabric-format-85b","title":"Refactor content.js: Extract UI components (notifications, buttons, overlay)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:36:33.4451267-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:41:27.7241151-08:00","closed_at":"2026-01-02T17:41:27.7241151-08:00","close_reason":"Content scripts in browser extensions are bundled into a single file. The code is already well-organized with 14 clear sections. Splitting would not reduce complexity due to bundling.","dependencies":[{"issue_id":"fabric-format-85b","depends_on_id":"fabric-format-3rm","type":"blocks","created_at":"2026-01-02T17:36:48.615434-08:00","created_by":"unknown"}]}
{"id":"fabric-format-8io","title":"Error handling improvements","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:21:59.122475-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:24:31.2652435-08:00","closed_at":"2026-01-02T17:24:31.2652435-08:00","close_reason":"All error handling improvements complete"}
{"id":"fabric-format-8qs","title":"Missing error handling for fs operations in cli.ts","description":"The CLI (cli.ts) performs fs operations (readFileSync, writeFileSync, statSync) without error handling. If a file is locked, doesn't exist, or has permission issues, the CLI will crash with an unhelpful error. Wrap all fs operations in try-catch blocks and provide user-friendly error messages.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T18:18:55.712375326Z","created_by":"runner","updated_at":"2026-01-02T15:03:15.9317826-08:00","closed_at":"2026-01-02T15:03:15.9317826-08:00","close_reason":"Added proper error handling for all fs operations in cli.ts with user-friendly messages for permission denied, file not found, file locked, and read-only filesystem errors"}
{"id":"fabric-format-8s0","title":"No documentation for WasmInitOptions in public API","description":"The WasmInitOptions type is exported in the public API but lacks documentation. Add JSDoc explaining: what it's for (Chrome extension WASM loading), the wasmUrl field (URL to .wasm file), the wasmBinary field (ArrayBuffer for sync init), and when to use each option.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:19:13.501564678Z","created_by":"runner","updated_at":"2026-01-02T17:11:25.8900604-08:00","closed_at":"2026-01-02T17:11:25.8900604-08:00","close_reason":"Added comprehensive JSDoc with examples for WasmInitOptions","dependencies":[{"issue_id":"fabric-format-8s0","depends_on_id":"fabric-format-c6m","type":"blocks","created_at":"2026-01-02T17:09:42.5987984-08:00","created_by":"unknown"},{"issue_id":"fabric-format-8s0","depends_on_id":"fabric-format-cpr","type":"related","created_at":"2026-01-02T18:19:36.417633732Z","created_by":"runner"}]}
{"id":"fabric-format-96z","title":"Extract span calculation helpers from parse-tree-analyzer.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:14:53.8173263-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T18:17:51.1342158-08:00","closed_at":"2026-01-02T18:17:51.1342158-08:00","close_reason":"Extracted calculateSpanLength and calculateNormalizedSpanLength to span-calculator.ts","dependencies":[{"issue_id":"fabric-format-96z","depends_on_id":"fabric-format-lu8","type":"blocks","created_at":"2026-01-02T18:15:09.8970853-08:00","created_by":"unknown"}]}
{"id":"fabric-format-9wz","title":"File extension validation not centralized in CLI","description":"File extension validation (checking for .py, .sql, .scala, .r) appears in multiple places in CLI. Centralize this into a single constant SUPPORTED_EXTENSIONS and a utility function isSupportedFile(path). This makes it easier to add new file types and keeps validation consistent.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:19:13.332515354Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3619038-08:00"}
{"id":"fabric-format-a7u","title":"Circular import risk between formatters/index.ts and individual formatters","description":"There's a circular import risk between formatters/index.ts (registry) and individual formatters (sql, python). The registry imports formatters, which may import from the registry. Refactor to use dependency injection or a factory pattern to break the circular dependency.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:19:13.519953533Z","created_by":"runner","updated_at":"2026-01-02T17:31:55.7588806-08:00","closed_at":"2026-01-02T17:31:55.7588806-08:00","close_reason":"Not a bug - circular import is not occurring. Individual formatters (sparksql, python) don't import from formatters/index.ts. The registry imports formatters, but formatters don't import the registry.","dependencies":[{"issue_id":"fabric-format-a7u","depends_on_id":"fabric-format-ymx","type":"blocks","created_at":"2026-01-02T17:30:55.8841497-08:00","created_by":"unknown"},{"issue_id":"fabric-format-a7u","depends_on_id":"fabric-format-6ts","type":"related","created_at":"2026-01-02T18:19:36.279307803Z","created_by":"runner"}]}
{"id":"fabric-format-acg","title":"Inconsistent async/sync API: formatCellSync only for sparksql","description":"The API has inconsistent async/sync patterns: formatCellSync exists only for sparksql, but not for python. Either provide sync versions for both languages (if possible) or make all APIs async for consistency. Document why sync is not available for Python (WASM async requirement).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:56.024661662Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3703036-08:00"}
{"id":"fabric-format-atx","title":"index.ts comment block references 'formatters/sql/' but actual path is 'formatters/sparksql/'","description":"The index.ts comment block references 'formatters/sql/' but the actual directory path is 'formatters/sparksql/'. Update the comment to match the actual code structure. Search for other references to 'formatters/sql/' in comments and update them.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:19:13.463966846Z","created_by":"runner","updated_at":"2026-01-02T17:11:24.9416712-08:00","closed_at":"2026-01-02T17:11:24.9416712-08:00","close_reason":"Fixed comment to reference formatters/sparksql/ instead of formatters/sql/","dependencies":[{"issue_id":"fabric-format-atx","depends_on_id":"fabric-format-c6m","type":"blocks","created_at":"2026-01-02T17:09:41.1251827-08:00","created_by":"unknown"},{"issue_id":"fabric-format-atx","depends_on_id":"fabric-format-jpq","type":"related","created_at":"2026-01-02T18:19:36.468199918Z","created_by":"runner"}]}
{"id":"fabric-format-bxc","title":"formatCell returns success:false but formatNotebook throws exceptions","description":"Inconsistent error handling: formatCell returns {error: string} while formatNotebook throws exceptions. Standardize error handling across the API. Recommendation: use a Result type or consistently throw exceptions for all public APIs.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:56.005803394Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3722205-08:00","dependencies":[{"issue_id":"fabric-format-bxc","depends_on_id":"fabric-format-acg","type":"related","created_at":"2026-01-02T18:19:36.3836481Z","created_by":"runner"}]}
{"id":"fabric-format-c62","title":"cli.ts exceeds 450 lines - violates 200-400 line guideline","description":"The cli.ts file is 458 lines long, exceeding the 200-400 line guideline. Split into modules: argument parsing, file discovery, formatting operations, and output handling. Consider using a CLI framework like commander or yargs.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:55.638998836Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3722205-08:00","dependencies":[{"issue_id":"fabric-format-c62","depends_on_id":"fabric-format-ymx","type":"blocks","created_at":"2026-01-02T17:30:57.213657-08:00","created_by":"unknown"}]}
{"id":"fabric-format-c6m","title":"Documentation and code comment cleanup","description":"Fix stale comments, wrong paths, add missing JSDoc for public API","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:09:35.911032-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:11:31.0933197-08:00","closed_at":"2026-01-02T17:11:31.0933197-08:00","close_reason":"Completed: fixed stale comments, wrong paths, added JSDoc for WasmInitOptions, updated test count"}
{"id":"fabric-format-ch7","title":"Inconsistent use of types vs interfaces throughout codebase","description":"The codebase inconsistently uses 'type' and 'interface' for type definitions. TypeScript best practice: use interface for public APIs and object shapes, use type for unions, intersections, and complex types. Standardize usage across the codebase for consistency. Examples: FormatterOptions should be interface, CellType should be type union.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:55.675314626Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3781314-08:00"}
{"id":"fabric-format-cpr","title":"Missing JSDoc for public API functions in index.ts","description":"Public API functions in index.ts lack JSDoc comments. Add comprehensive JSDoc for all exported functions including: purpose, parameters, return values, examples, and any exceptions thrown. This is critical for library consumers.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:56.063966973Z","created_by":"runner","updated_at":"2026-01-02T17:11:26.306848-08:00","closed_at":"2026-01-02T17:11:26.306848-08:00","close_reason":"Enhanced package documentation header with @packageDocumentation","dependencies":[{"issue_id":"fabric-format-cpr","depends_on_id":"fabric-format-c6m","type":"blocks","created_at":"2026-01-02T17:09:42.2373282-08:00","created_by":"unknown"}]}
{"id":"fabric-format-f17","title":"Missing edge case tests for empty files and empty cells","description":"Missing edge case tests for empty files and empty cells. Add tests for: completely empty file, file with only whitespace, cells with only comments, cells with only blank lines, zero-length strings. Ensure these cases don't crash and return appropriate results.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:55.841053239Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3832501-08:00","dependencies":[{"issue_id":"fabric-format-f17","depends_on_id":"fabric-format-vfh","type":"related","created_at":"2026-01-02T18:19:36.366418092Z","created_by":"runner"}]}
{"id":"fabric-format-f2l","title":"findSupportedFiles doesn't handle symlinks","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-02T18:19:13.59405268Z","created_by":"runner","updated_at":"2026-01-02T17:21:21.2735902-08:00","closed_at":"2026-01-02T17:21:21.2735902-08:00","close_reason":"Added symlink handling in findSupportedFiles using isSymbolicLink() and statSync","dependencies":[{"issue_id":"fabric-format-f2l","depends_on_id":"fabric-format-2h6","type":"blocks","created_at":"2026-01-02T17:18:57.157234-08:00","created_by":"unknown"}]}
{"id":"fabric-format-hm6","title":"SQL_STYLE_GUIDE.md has typo: 'Meanign' should be 'Meaning'","description":"SQL_STYLE_GUIDE.md has a typo on line 3: 'Meanign' should be 'Meaning'. Fix the typo. [Note: This was already fixed in the first iteration]","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:18:55.932240325Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3854775-08:00","closed_at":"2026-01-02T18:20:23.844253131Z","close_reason":"Fixed typo in SQL_STYLE_GUIDE.md"}
{"id":"fabric-format-i6u","title":"No tests for directory traversal and file discovery in CLI","description":"No tests for directory traversal and file discovery in the CLI. The findSupportedFiles() function recursively walks directories - this needs testing. Add tests for: nested directories, mixed file types, excluding node_modules/.git, symlinks, empty directories, permission errors.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:18:55.785297721Z","created_by":"runner","updated_at":"2026-01-02T15:18:07.4116782-08:00","closed_at":"2026-01-02T15:18:07.4116782-08:00","close_reason":"Added 21 tests for directory traversal and file discovery: nested directories, mixed file types, excluded directories (node_modules, .git, __pycache__, venv, dist, build), symlinks, empty directories, multiple paths, and check command with directories"}
{"id":"fabric-format-j2o","title":"TypeScript strict mode disabled in tsconfig.base.json","description":"TypeScript strict mode is disabled in tsconfig.base.json (strict: false). This allows unsafe code patterns like implicit any, null coercion, and missing property checks. Enable strict mode to catch type errors at compile time. This blocks fixing 2 other issues (fabric-format-67h and fabric-format-ch7) which require strict mode to be properly addressed.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T18:18:35.246682435Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.3918086-08:00","dependencies":[{"issue_id":"fabric-format-j2o","depends_on_id":"fabric-format-67h","type":"blocks","created_at":"2026-01-02T18:19:36.155355174Z","created_by":"runner"},{"issue_id":"fabric-format-j2o","depends_on_id":"fabric-format-ch7","type":"blocks","created_at":"2026-01-02T18:19:36.174159552Z","created_by":"runner"}]}
{"id":"fabric-format-jpq","title":"Comment says 'sparkfmt' but package is 'fabric-format'","description":"The index.ts file has a comment 'sparkfmt - Spark SQL \u0026 Python Formatter' but the package is named fabric-format. Update the comment to match the actual package name. This is a minor inconsistency but can confuse new contributors. Also check for other references to 'sparkfmt' in comments.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:19:13.369909315Z","created_by":"runner","updated_at":"2026-01-02T17:11:25.3229136-08:00","closed_at":"2026-01-02T17:11:25.3229136-08:00","close_reason":"Updated sparkfmt references to @jacobknightley/fabric-format in index.ts and sql-formatter.ts","dependencies":[{"issue_id":"fabric-format-jpq","depends_on_id":"fabric-format-c6m","type":"blocks","created_at":"2026-01-02T17:09:41.5033779-08:00","created_by":"unknown"}]}
{"id":"fabric-format-k2q","title":"Race condition possible if initializePythonFormatter called multiple times","description":"If initializePythonFormatter() is called multiple times concurrently, there's a race condition. Multiple callers might create separate initialization promises, leading to duplicate WASM loads or inconsistent state. Add proper synchronization: check if initialization is in progress before starting a new one, and ensure all callers wait for the same promise.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T18:19:13.556881322Z","created_by":"runner","updated_at":"2026-01-02T15:35:56.0115235-08:00","closed_at":"2026-01-02T15:35:56.0115235-08:00","close_reason":"Fixed race condition by ensuring pythonFormatterInitPromise is assigned synchronously before any await. Added error recovery to reset promise on failure. Added tests for concurrent initialization and promise state management."}
{"id":"fabric-format-lu8","title":"Refactor parse-tree-analyzer.ts: Extract visitor method groups to separate modules","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:36:32.6951879-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T18:23:54.1882216-08:00","closed_at":"2026-01-02T18:23:54.1882216-08:00","close_reason":"Partial extraction complete: span-calculator.ts extracted (~360 lines). Remaining helpers mutate class state - deferred to fabric-format-3e5. File reduced from 2176 to 1816 lines.","dependencies":[{"issue_id":"fabric-format-lu8","depends_on_id":"fabric-format-3rm","type":"blocks","created_at":"2026-01-02T17:36:47.9044581-08:00","created_by":"unknown"}]}
{"id":"fabric-format-nf2","title":"formatting-context.ts exceeds 400 lines - approaches upper limit","description":"The formatting-context.ts file is 449 lines, approaching the 400-line upper limit. Monitor for future growth and consider splitting if it exceeds 400 lines. Potential split points: state management, utility functions, and type definitions.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:18:55.656697434Z","created_by":"runner","updated_at":"2026-01-02T17:32:27.4769388-08:00","closed_at":"2026-01-02T17:32:27.4769388-08:00","close_reason":"At 416 lines, formatting-context.ts is just above the soft limit. Well-organized with types and state management. No action needed.","dependencies":[{"issue_id":"fabric-format-nf2","depends_on_id":"fabric-format-ymx","type":"blocks","created_at":"2026-01-02T17:30:58.6904912-08:00","created_by":"unknown"}]}
{"id":"fabric-format-njt","title":"AGENTS.md says tests are in packages/core/src/tests/ but structure unclear","description":"AGENTS.md says tests are in packages/core/src/tests/ but doesn't clarify the subdirectory structure (sparksql/, python/, integration/). Add a section documenting the test organization pattern: feature-based modules in sparksql/, Ruff integration tests in python/, CLI and file parsing tests in integration/.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:19:13.482663216Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.4034432-08:00"}
{"id":"fabric-format-p5y","title":"Refactor formatter.ts: Extract function expansion (~100 lines)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:36:24.6685897-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:40:37.3413104-08:00","closed_at":"2026-01-02T17:40:37.3413104-08:00","close_reason":"Created function-expansion.ts with handleFunctionExpansion (~90 lines)","dependencies":[{"issue_id":"fabric-format-p5y","depends_on_id":"fabric-format-3rm","type":"blocks","created_at":"2026-01-02T17:36:42.0988179-08:00","created_by":"unknown"}]}
{"id":"fabric-format-q1e","title":"Refactor formatter.ts: Extract clause tracking (~50 lines)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:36:25.5907276-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:40:42.0941108-08:00","closed_at":"2026-01-02T17:40:42.0941108-08:00","close_reason":"updateClauseFlags included in output-helpers.ts (~30 lines)","dependencies":[{"issue_id":"fabric-format-q1e","depends_on_id":"fabric-format-3rm","type":"blocks","created_at":"2026-01-02T17:36:42.6106565-08:00","created_by":"unknown"}]}
{"id":"fabric-format-r1p","title":"Registry pattern may be over-engineered for 2 formatters","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:19:13.538393371Z","created_by":"runner","updated_at":"2026-01-02T18:19:13.538393371Z"}
{"id":"fabric-format-r3t","title":"Build fails when ANTLR download is blocked by network","description":"Build fails when ANTLR download is blocked by network restrictions (firewalls, offline environments). The build script downloads ANTLR from antlr.org which may be blocked. Solutions: 1) Check for cached ANTLR jar first, 2) Allow specifying ANTLR_JAR_PATH env variable, 3) Bundle ANTLR jar in repo (trade-off: repo size), 4) Document manual download steps.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-02T18:18:55.950440067Z","created_by":"runner","updated_at":"2026-01-02T15:32:50.7548765-08:00","closed_at":"2026-01-02T15:32:50.7548765-08:00","close_reason":"Resolved by updating GitHub Actions workflow config to allow antlr.org downloads","dependencies":[{"issue_id":"fabric-format-r3t","depends_on_id":"fabric-format-44r","type":"related","created_at":"2026-01-02T18:19:36.485547621Z","created_by":"runner"}]}
{"id":"fabric-format-ruu","title":"No tests for concurrent formatting scenarios","description":"No tests for concurrent formatting scenarios. If formatNotebook is called simultaneously on the same file or multiple files, does it work correctly? Add tests for: concurrent formatNotebook calls, concurrent Python formatter initialization, thread safety of global state.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:18:55.822138794Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.4086366-08:00"}
{"id":"fabric-format-txv","title":"Public API exports internal types like AnalyzerResult unnecessarily","description":"The index.ts exports internal types like AnalyzerResult, FormattingState, MultiArgFunctionInfo, which are implementation details. These expose internal architecture to consumers and create coupling. Move internal types to a separate internal.ts file and only export public-facing types.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:56.045114104Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.4103672-08:00","dependencies":[{"issue_id":"fabric-format-txv","depends_on_id":"fabric-format-cpr","type":"related","created_at":"2026-01-02T18:19:36.400943254Z","created_by":"runner"}]}
{"id":"fabric-format-ur0","title":"No tests for formatCell error handling paths","description":"No tests for formatCell error handling paths. The function returns {error: string} but there are no tests verifying error scenarios. Add tests for: invalid SQL syntax, Python syntax errors, formatter initialization failures, empty input, null input, extremely large input.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:19:13.388409638Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.4129605-08:00","dependencies":[{"issue_id":"fabric-format-ur0","depends_on_id":"fabric-format-1ys","type":"related","created_at":"2026-01-02T18:19:36.3492235Z","created_by":"runner"}]}
{"id":"fabric-format-vfh","title":"Missing error path tests for formatNotebook invalid input","description":"Missing tests for error paths in formatNotebook(). The function throws NotebookStructureError but there are no tests verifying this behavior. Add tests for: invalid JSON, missing language metadata, malformed cell structure, empty files, mixed language cells.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:18:55.80381429Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.413993-08:00"}
{"id":"fabric-format-vwj","title":"Magic command detection logic duplicated across modules","description":"Magic command detection logic (e.g., '%%sql' detection) is duplicated in formatters/index.ts (detectLanguage) and notebook-formatter.ts. Create a shared utility module magic-commands.ts with functions: detectMagicCommand(code), extractMagicCommand(line), etc. Use this across the codebase.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:19:13.313942007Z","created_by":"runner","updated_at":"2026-01-02T17:32:16.2261705-08:00","closed_at":"2026-01-02T17:32:16.2261705-08:00","close_reason":"Intentional - the two modules handle different magic command contexts: formatters/index.ts handles raw %%sql, notebook-formatter.ts handles Fabric-specific # MAGIC %%sql prefixes. Extracting would create over-abstraction.","dependencies":[{"issue_id":"fabric-format-vwj","depends_on_id":"fabric-format-ymx","type":"blocks","created_at":"2026-01-02T17:30:56.1933464-08:00","created_by":"unknown"},{"issue_id":"fabric-format-vwj","depends_on_id":"fabric-format-xgb","type":"related","created_at":"2026-01-02T18:19:36.503082115Z","created_by":"runner"}]}
{"id":"fabric-format-wg2","title":"Chromium DOM/Performance bug fixes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:25:04.0045862-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:27:44.1520723-08:00","closed_at":"2026-01-02T17:27:44.1520723-08:00","close_reason":"All 5 Chromium DOM/Performance issues addressed"}
{"id":"fabric-format-x8w","title":"README.md documents 'fabfmt format' but doesn't mention exit codes","description":"README.md documents the 'fabfmt check' command but doesn't mention that it exits with code 1 when changes are needed and 0 when files are already formatted. This is important for CI/CD integration. Add a section explaining exit codes: 0 (success/no changes), 1 (changes needed), 2 (error).","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:18:55.878783167Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.4218499-08:00","dependencies":[{"issue_id":"fabric-format-x8w","depends_on_id":"fabric-format-x9d","type":"related","created_at":"2026-01-02T18:19:36.434250612Z","created_by":"runner"}]}
{"id":"fabric-format-x9d","title":"CONTRIBUTING.md doesn't document how to test chromium package","description":"CONTRIBUTING.md doesn't document how to test the chromium package. Add a section explaining: how to build the extension (npm run build:chromium), how to load it in Chrome/Edge for testing, how to test changes, and what to test before submitting changes.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:18:55.914200665Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.4223654-08:00"}
{"id":"fabric-format-xgb","title":"Naming inconsistency: formatSql vs formatCell vs formatNotebook","description":"Inconsistent naming: formatSql (for SQL), formatCell (for any cell), formatNotebook (for files). This creates confusion about what each function does. Consider renaming for consistency: formatSqlCode, formatCellCode, formatNotebookFile. Or use a single format() function with type detection.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:19:13.351599159Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.4223654-08:00"}
{"id":"fabric-format-xo0","title":"Project configuration and cleanup fixes","description":"Quick fixes: .editorconfig, pre-commit hooks, package.json fields, stale TODOs, debug code removal","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:13:12.969252-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:15:51.6530868-08:00","closed_at":"2026-01-02T17:15:51.6530868-08:00","close_reason":"Completed: .editorconfig, pre-commit hooks, author field, TODO removal, debug code removal"}
{"id":"fabric-format-xui","title":"Test framework lacks proper assertion library","description":"Test framework lacks proper assertion library. Tests use simple comparison (===) instead of a proper assertion library with helpful error messages. Consider: 1) Keep custom framework but add assertion helpers (expect, toBe, toThrow), 2) Migrate to Vitest/Jest for better assertions, matcher functions, and error reporting.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T18:19:13.445731015Z","created_by":"runner","updated_at":"2026-01-02T14:57:40.4293861-08:00"}
{"id":"fabric-format-ymx","title":"Code organization and file size refactoring","description":"Refactor large files to comply with 200-400 line guideline and improve module separation","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-02T17:30:49.278065-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:30:58.960676-08:00"}
{"id":"fabric-format-zhx","title":"Refactor formatter.ts: Extract output helpers (~100 lines)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:36:23.834859-08:00","created_by":"Jacob Knightley","updated_at":"2026-01-02T17:40:31.6576966-08:00","closed_at":"2026-01-02T17:40:31.6576966-08:00","close_reason":"Created output-helpers.ts with outputWithNewline, outputWithoutNewline, updateClauseFlags (~160 lines)","dependencies":[{"issue_id":"fabric-format-zhx","depends_on_id":"fabric-format-3rm","type":"blocks","created_at":"2026-01-02T17:36:41.5738333-08:00","created_by":"unknown"}]}
